{"version":3,"file":"reactjsPopup.es.js","sources":["../src/Utils.js","../src/popup.css.js","../src/Popup.js"],"sourcesContent":["/* Algo to calculate position \n  1. center position for popup content : the center of the trigger will be the center of the content content\n      so the popup content position will be like this :\n      top => the y of the center for the trigger element : trigger.top + trigger.height/2\n      left => the x of the center for the trigger element : trigger.left + trigger.width/2\n\n  2. translate position according to the first  position attribute  passed  in the function argument \n      for example :\n        position = 'left top'\n        we need to handle the first argument in the position: 'left' => that's mean we need to translate the popup content according to the X axis by - content.width/2\n      \n  3.translate position according to the first  position attribute  passed  in the function argument \n    for example :\n      position = 'left top'\n      the second argument 'top' => translate popup content by + content.height*4/5\n\n*/\n\nexport default function calculatePosition(\n  triggerBounding,\n  ContentBounding,\n  position\n) {\n  const style = {};\n  const margin = 8;\n  const args = position.split(\",\");\n  // the step N 1 : center the popup content => ok\n  const CenterTop = triggerBounding.top + triggerBounding.height / 2;\n  const CenterLeft = triggerBounding.left + triggerBounding.width / 2;\n  const { height, width } = ContentBounding;\n  let top = CenterTop - height / 2;\n  let left = CenterLeft - width / 2;\n  let transform = \"\";\n  let arrowTop = \"0%\";\n  let arrowLeft = \"0%\";\n  // the  step N 2 : => ok\n  switch (args[0]) {\n    case \"top\":\n      top -= height / 2 + triggerBounding.height / 2 + margin;\n      transform = `rotate(45deg)`;\n      arrowTop = \"100%\";\n      arrowLeft = \"50%\";\n      break;\n    case \"bottom\":\n      top += height / 2 + triggerBounding.height / 2 + margin;\n      transform = `rotate(225deg)`;\n      arrowLeft = \"50%\";\n      break;\n    case \"left\":\n      left -= width / 2 + triggerBounding.width / 2 + margin;\n      transform = ` rotate(-45deg)`;\n      arrowLeft = \"100%\";\n      arrowTop = \"50%\";\n      break;\n    case \"right\":\n      left += width / 2 + triggerBounding.width / 2 + margin;\n      transform = `rotate(135deg)`;\n      arrowTop = \"50%\";\n\n      break;\n  }\n  switch (args[1]) {\n    case \"top\":\n      top = triggerBounding.top;\n      arrowTop = triggerBounding.height / 2 + \"px\";\n      break;\n    case \"bottom\":\n      top = triggerBounding.bottom - height + triggerBounding.height;\n      arrowTop = height - triggerBounding.height / 2 + \"px\";\n      break;\n    case \"left\":\n      left = triggerBounding.left;\n      arrowLeft = triggerBounding.width / 2 + \"px\";\n      break;\n    case \"right\":\n      left = triggerBounding.left - width + triggerBounding.width;\n      arrowLeft = width - triggerBounding.width / 2 + \"px\";\n      break;\n  }\n\n  return { top, left, transform, arrowLeft, arrowTop };\n}\n","export default {\n  popupContent: {\n    position: \"absolute\",\n    zIndex: \"2\",\n    width: \"200px\",\n    background: `rgb(255, 255, 255)`,\n    border: `1px solid rgb(187, 187, 187)`,\n    boxShadow: `rgba(0, 0, 0, 0.2) 0px 1px 3px`\n  },\n  popupArrow: {\n    height: \"10px\",\n    width: \"10px\",\n    position: \"absolute\",\n    background: \"rgb(255, 255, 255)\",\n    transform: \"rotate(45deg)\",\n    margin: \"-5px\",\n    boxShadow: \"rgba(0, 0, 0, 0.2) 2px 2px 1px\"\n  },\n  overlay: {\n    position: \"fixed\",\n    top: \"0\",\n    bottom: \"0\",\n    left: \"0\",\n    right: \"0\"\n  }\n};\n","import React from \"react\";\nimport calculatePosition from \"./Utils\";\n// https://philipwalton.com/articles/what-no-one-told-you-about-z-index/\n\nimport styles from \"./popup.css.js\";\n\nexport default class Popup extends React.Component {\n  static defaultProps = {\n    closeOnDocumentClick: false,\n    defaultOpen: false,\n    triggerOn: \"click\",\n    style: {},\n    className: \"\",\n    position: \"bottom,center\"\n  };\n  state = {\n    isOpen: this.props.defaultOpen\n  };\n  timeOut = 0;\n\n  constructor(props) {\n    super(props);\n    this.setTriggerRef = r => (this.TriggerEl = r);\n    this.setContentRef = r => (this.ContentEl = r);\n    this.setArrowRef = r => (this.ArrowEl = r);\n    this.setHelperRef = r => (this.HelperEl = r);\n  }\n\n  togglePopup = () => {\n    this.setState(\n      prevState => ({\n        isOpen: !prevState.isOpen\n      }),\n      () => this.state.isOpen && this.setPosition()\n    );\n  };\n  openPopup = () => {\n    this.setState({ isOpen: true }, () => this.setPosition());\n  };\n  closePopup = () => {\n    this.setState({ isOpen: false });\n  };\n  onMouseEnter = () => {\n    clearTimeout(this.timeOut);\n    this.openPopup();\n  };\n  onMouseLeave = () => {\n    clearTimeout(this.timeOut);\n    this.timeOut = setTimeout(() => this.closePopup(), 300);\n  };\n\n  setPosition = () => {\n    const helper = this.HelperEl.getBoundingClientRect();\n    const trigger = this.TriggerEl.getBoundingClientRect();\n    const content = this.ContentEl.getBoundingClientRect();\n    const cords = calculatePosition(trigger, content, this.props.position);\n    this.ContentEl.style.top = cords.top - helper.top + \"px\";\n    this.ContentEl.style.left = cords.left - helper.left + \"px\";\n    this.ArrowEl.style.transform = cords.transform;\n    this.ArrowEl.style.top = cords.arrowTop;\n    this.ArrowEl.style.left = cords.arrowLeft;\n    if (\n      this.TriggerEl.style.position == \"static\" ||\n      this.TriggerEl.style.position == \"\"\n    )\n      this.TriggerEl.style.position = \"relative\";\n  };\n\n  renderTrigger = () => {\n    const triggerProps = {};\n    const { triggerOn } = this.props;\n    triggerProps.ref = this.setTriggerRef;\n    switch (triggerOn) {\n      case \"click\":\n        triggerProps.onClick = this.togglePopup;\n        break;\n      case \"hover\":\n        triggerProps.onMouseEnter = this.onMouseEnter;\n        triggerProps.onMouseLeave = this.onMouseLeave;\n        break;\n    }\n    return React.cloneElement(this.props.trigger, triggerProps);\n  };\n\n  addWarperAction = () => {\n    const childrenElementProps = {\n      className: `${this.props.className}`,\n      style: Object.assign({}, styles.popupContent, this.props.style),\n      ref: this.setContentRef,\n      onClick: e => {\n        e.stopPropagation();\n      }\n    };\n    if (this.props.triggerOn === \"hover\") {\n      childrenElementProps.onMouseEnter = this.onMouseEnter;\n      childrenElementProps.onMouseLeave = this.onMouseLeave;\n    }\n    return childrenElementProps;\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <div\n          style={{ position: \"absolute\", top: \"0px\", left: \"0px\" }}\n          ref={this.setHelperRef}\n        />\n        {this.state.isOpen &&\n          this.props.closeOnDocumentClick && (\n            <span\n              style={styles.overlay}\n              onClick={\n                this.props.closeOnDocumentClick ? this.closePopup : undefined\n              }\n            />\n          )}\n\n        {this.state.isOpen && (\n          <div {...this.addWarperAction()}>\n            <div ref={this.setArrowRef} style={styles.popupArrow} />\n            {typeof this.props.children === \"function\"\n              ? this.props.children(this.state.isOpen, this.closePopup)\n              : this.props.children}\n          </div>\n        )}\n        {this.renderTrigger()}\n      </React.Fragment>\n    );\n  }\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  const PropTypes = require(\"prop-types\");\n\n  Popup.propTypes = {\n    style: PropTypes.object,\n    className: PropTypes.string,\n    trigger: PropTypes.element,\n    children: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.element,\n      PropTypes.string\n    ]).isRequired,\n    closeOnDocumentClick: PropTypes.bool,\n    triggerOn: PropTypes.oneOf([\"hover\", \"click\"]),\n    position: PropTypes.oneOf([\n      \"top,left\",\n      \"top,center\",\n      \"top,right\",\n      \"bottom,left\",\n      \"bottom,center\",\n      \"bottom,right\",\n      \"right,top\",\n      \"right,center\",\n      \"right,bottom\",\n      \"left,top\",\n      \"left,center\",\n      \"left,bottom\"\n    ])\n  };\n}\n\n/*\n  render() {\n    return (\n      <React.Fragment>\n        {this.renderTrigger()}\n        {this.state.isOpen && (\n          <div\n            className=\"overlay\"\n            onClick={\n              this.props.closeOnDocumentClick ? this.closePopup : undefined\n            }\n          >\n            <div {...this.addWarperAction()}>\n              <div ref={this.setArrowRef} className=\"popup-arrow\" />\n              {typeof this.props.children === \"function\"\n                ? this.props.children(this.state.isOpen, this.closePopup)\n                : this.props.children}\n            </div>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n*/\n"],"names":["calculatePosition","triggerBounding","ContentBounding","position","margin","args","split","CenterTop","top","height","CenterLeft","left","width","transform","arrowTop","arrowLeft","bottom","Popup","props","state","defaultOpen","timeOut","togglePopup","setState","prevState","isOpen","setPosition","openPopup","closePopup","onMouseEnter","onMouseLeave","setTimeout","helper","HelperEl","getBoundingClientRect","trigger","TriggerEl","content","ContentEl","cords","style","ArrowEl","renderTrigger","triggerProps","triggerOn","ref","setTriggerRef","onClick","React","cloneElement","addWarperAction","childrenElementProps","className","Object","assign","styles","popupContent","setContentRef","stopPropagation","r","setArrowRef","setHelperRef","closeOnDocumentClick","overlay","undefined","popupArrow","children","Component","defaultProps","process","env","NODE_ENV","PropTypes","require","propTypes","object","string","element","oneOfType","func","isRequired","bool","oneOf"],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;AAkBA,AAAe,SAASA,iBAAT,CACbC,eADa,EAEbC,eAFa,EAGbC,QAHa,EAIb;MAEMC,SAAS,CAAf;MACMC,OAAOF,SAASG,KAAT,CAAe,GAAf,CAAb;;MAEMC,YAAYN,gBAAgBO,GAAhB,GAAsBP,gBAAgBQ,MAAhB,GAAyB,CAAjE;MACMC,aAAaT,gBAAgBU,IAAhB,GAAuBV,gBAAgBW,KAAhB,GAAwB,CAAlE;MACQH,MAPR,GAO0BP,eAP1B,CAOQO,MAPR;MAOgBG,KAPhB,GAO0BV,eAP1B,CAOgBU,KAPhB;;MAQIJ,MAAMD,YAAYE,SAAS,CAA/B;MACIE,OAAOD,aAAaE,QAAQ,CAAhC;MACIC,YAAY,EAAhB;MACIC,WAAW,IAAf;MACIC,YAAY,IAAhB;;UAEQV,KAAK,CAAL,CAAR;SACO,KAAL;aACSI,SAAS,CAAT,GAAaR,gBAAgBQ,MAAhB,GAAyB,CAAtC,GAA0CL,MAAjD;;iBAEW,MAAX;kBACY,KAAZ;;SAEG,QAAL;aACSK,SAAS,CAAT,GAAaR,gBAAgBQ,MAAhB,GAAyB,CAAtC,GAA0CL,MAAjD;;kBAEY,KAAZ;;SAEG,MAAL;cACUQ,QAAQ,CAAR,GAAYX,gBAAgBW,KAAhB,GAAwB,CAApC,GAAwCR,MAAhD;;kBAEY,MAAZ;iBACW,KAAX;;SAEG,OAAL;cACUQ,QAAQ,CAAR,GAAYX,gBAAgBW,KAAhB,GAAwB,CAApC,GAAwCR,MAAhD;;iBAEW,KAAX;;;;UAIIC,KAAK,CAAL,CAAR;SACO,KAAL;YACQJ,gBAAgBO,GAAtB;iBACWP,gBAAgBQ,MAAhB,GAAyB,CAAzB,GAA6B,IAAxC;;SAEG,QAAL;YACQR,gBAAgBe,MAAhB,GAAyBP,MAAzB,GAAkCR,gBAAgBQ,MAAxD;iBACWA,SAASR,gBAAgBQ,MAAhB,GAAyB,CAAlC,GAAsC,IAAjD;;SAEG,MAAL;aACSR,gBAAgBU,IAAvB;kBACYV,gBAAgBW,KAAhB,GAAwB,CAAxB,GAA4B,IAAxC;;SAEG,OAAL;aACSX,gBAAgBU,IAAhB,GAAuBC,KAAvB,GAA+BX,gBAAgBW,KAAtD;kBACYA,QAAQX,gBAAgBW,KAAhB,GAAwB,CAAhC,GAAoC,IAAhD;;;;SAIG,EAAEJ,QAAF,EAAOG,UAAP,EAAaE,oBAAb,EAAwBE,oBAAxB,EAAmCD,kBAAnC,EAAP;;;AChFF,aAAe;gBACC;cACF,UADE;YAEJ,GAFI;WAGL,OAHK;oCAAA;0CAAA;;GADD;cASD;YACF,MADE;WAEH,MAFG;cAGA,UAHA;gBAIE,oBAJF;eAKC,eALD;YAMF,MANE;eAOC;GAhBA;WAkBJ;cACG,OADH;SAEF,GAFE;YAGC,GAHD;UAID,GAJC;WAKA;;CAvBX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEA;;AAEA,IAEqBG;;;iBAcPC,KAAZ,EAAmB;;;6GACXA,KADW;;UALnBC,KAKmB,GALX;cACE,MAAKD,KAAL,CAAWE;KAIF;UAFnBC,OAEmB,GAFT,CAES;;UAQnBC,WARmB,GAQL,YAAM;YACbC,QAAL,CACE;eAAc;kBACJ,CAACC,UAAUC;SADrB;OADF,EAIE;eAAM,MAAKN,KAAL,CAAWM,MAAX,IAAqB,MAAKC,WAAL,EAA3B;OAJF;KATiB;;UAgBnBC,SAhBmB,GAgBP,YAAM;YACXJ,QAAL,CAAc,EAAEE,QAAQ,IAAV,EAAd,EAAgC;eAAM,MAAKC,WAAL,EAAN;OAAhC;KAjBiB;;UAmBnBE,UAnBmB,GAmBN,YAAM;YACZL,QAAL,CAAc,EAAEE,QAAQ,KAAV,EAAd;KApBiB;;UAsBnBI,YAtBmB,GAsBJ,YAAM;mBACN,MAAKR,OAAlB;YACKM,SAAL;KAxBiB;;UA0BnBG,YA1BmB,GA0BJ,YAAM;mBACN,MAAKT,OAAlB;YACKA,OAAL,GAAeU,WAAW;eAAM,MAAKH,UAAL,EAAN;OAAX,EAAoC,GAApC,CAAf;KA5BiB;;UA+BnBF,WA/BmB,GA+BL,YAAM;UACZM,SAAS,MAAKC,QAAL,CAAcC,qBAAd,EAAf;UACMC,UAAU,MAAKC,SAAL,CAAeF,qBAAf,EAAhB;UACMG,UAAU,MAAKC,SAAL,CAAeJ,qBAAf,EAAhB;UACMK,QAAQvC,kBAAkBmC,OAAlB,EAA2BE,OAA3B,EAAoC,MAAKnB,KAAL,CAAWf,QAA/C,CAAd;YACKmC,SAAL,CAAeE,KAAf,CAAqBhC,GAArB,GAA2B+B,MAAM/B,GAAN,GAAYwB,OAAOxB,GAAnB,GAAyB,IAApD;YACK8B,SAAL,CAAeE,KAAf,CAAqB7B,IAArB,GAA4B4B,MAAM5B,IAAN,GAAaqB,OAAOrB,IAApB,GAA2B,IAAvD;YACK8B,OAAL,CAAaD,KAAb,CAAmB3B,SAAnB,GAA+B0B,MAAM1B,SAArC;YACK4B,OAAL,CAAaD,KAAb,CAAmBhC,GAAnB,GAAyB+B,MAAMzB,QAA/B;YACK2B,OAAL,CAAaD,KAAb,CAAmB7B,IAAnB,GAA0B4B,MAAMxB,SAAhC;UAEE,MAAKqB,SAAL,CAAeI,KAAf,CAAqBrC,QAArB,IAAiC,QAAjC,IACA,MAAKiC,SAAL,CAAeI,KAAf,CAAqBrC,QAArB,IAAiC,EAFnC,EAIE,MAAKiC,SAAL,CAAeI,KAAf,CAAqBrC,QAArB,GAAgC,UAAhC;KA7Ce;;UAgDnBuC,aAhDmB,GAgDH,YAAM;UACdC,eAAe,EAArB;UACQC,SAFY,GAEE,MAAK1B,KAFP,CAEZ0B,SAFY;;mBAGPC,GAAb,GAAmB,MAAKC,aAAxB;cACQF,SAAR;aACO,OAAL;uBACeG,OAAb,GAAuB,MAAKzB,WAA5B;;aAEG,OAAL;uBACeO,YAAb,GAA4B,MAAKA,YAAjC;uBACaC,YAAb,GAA4B,MAAKA,YAAjC;;;aAGGkB,MAAMC,YAAN,CAAmB,MAAK/B,KAAL,CAAWiB,OAA9B,EAAuCQ,YAAvC,CAAP;KA7DiB;;UAgEnBO,eAhEmB,GAgED,YAAM;UAChBC,uBAAuB;wBACb,MAAKjC,KAAL,CAAWkC,SADE;eAEpBC,OAAOC,MAAP,CAAc,EAAd,EAAkBC,OAAOC,YAAzB,EAAuC,MAAKtC,KAAL,CAAWsB,KAAlD,CAFoB;aAGtB,MAAKiB,aAHiB;iBAIlB,oBAAK;YACVC,eAAF;;OALJ;UAQI,MAAKxC,KAAL,CAAW0B,SAAX,KAAyB,OAA7B,EAAsC;6BACff,YAArB,GAAoC,MAAKA,YAAzC;6BACqBC,YAArB,GAAoC,MAAKA,YAAzC;;aAEKqB,oBAAP;KA7EiB;;UAEZL,aAAL,GAAqB;aAAM,MAAKV,SAAL,GAAiBuB,CAAvB;KAArB;UACKF,aAAL,GAAqB;aAAM,MAAKnB,SAAL,GAAiBqB,CAAvB;KAArB;UACKC,WAAL,GAAmB;aAAM,MAAKnB,OAAL,GAAekB,CAArB;KAAnB;UACKE,YAAL,GAAoB;aAAM,MAAK5B,QAAL,GAAgB0B,CAAtB;KAApB;;;;;;6BA2EO;aAEL;aAAA,CAAO,QAAP;;;iBAEW,EAAExD,UAAU,UAAZ,EAAwBK,KAAK,KAA7B,EAAoCG,MAAM,KAA1C,EADT;eAEO,KAAKkD;UAHd;aAKQ1C,KAAL,CAAWM,MAAX,IACC,KAAKP,KAAL,CAAW4C,oBADZ,IAEG;iBACSP,OAAOQ,OADhB;mBAGI,KAAK7C,KAAL,CAAW4C,oBAAX,GAAkC,KAAKlC,UAAvC,GAAoDoC;UAV9D;aAeQ7C,KAAL,CAAWM,MAAX,IACC;;eAAcyB,eAAL,EAAT;uCACO,KAAK,KAAKU,WAAf,EAA4B,OAAOL,OAAOU,UAA1C,GADF;iBAEU,KAAK/C,KAAL,CAAWgD,QAAlB,KAA+B,UAA/B,GACG,KAAKhD,KAAL,CAAWgD,QAAX,CAAoB,KAAK/C,KAAL,CAAWM,MAA/B,EAAuC,KAAKG,UAA5C,CADH,GAEG,KAAKV,KAAL,CAAWgD;SApBrB;aAuBQxB,aAAL;OAxBL;;;;EA/F+BM,MAAMmB;;AAApBlD,MACZmD,eAAe;wBACE,KADF;eAEP,KAFO;aAGT,OAHS;SAIb,EAJa;aAKT,EALS;YAMV;;AAsHd,IAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;MACnCC,YAAYC,QAAQ,YAAR,CAAlB;;QAEMC,SAAN,GAAkB;WACTF,UAAUG,MADD;eAELH,UAAUI,MAFL;aAGPJ,UAAUK,OAHH;cAINL,UAAUM,SAAV,CAAoB,CAC5BN,UAAUO,IADkB,EAE5BP,UAAUK,OAFkB,EAG5BL,UAAUI,MAHkB,CAApB,EAIPI,UARa;0BASMR,UAAUS,IAThB;eAULT,UAAUU,KAAV,CAAgB,CAAC,OAAD,EAAU,OAAV,CAAhB,CAVK;cAWNV,UAAUU,KAAV,CAAgB,CACxB,UADwB,EAExB,YAFwB,EAGxB,WAHwB,EAIxB,aAJwB,EAKxB,eALwB,EAMxB,cANwB,EAOxB,WAPwB,EAQxB,cARwB,EASxB,cATwB,EAUxB,UAVwB,EAWxB,aAXwB,EAYxB,aAZwB,CAAhB;GAXZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}